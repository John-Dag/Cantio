(this.webpackJsonpcantio=this.webpackJsonpcantio||[]).push([[0],{15:function(e,t,s){},46:function(e,t,s){},72:function(e,t,s){},79:function(e,t,s){"use strict";s.r(t);var a=s(0),r=s(1),c=s.n(r),n=s(21),i=s.n(n),o=(s(46),s(18)),l=s(7),p=s.n(l),d=s(14),u=s(3),j=s(4),h=s(6),b=s(5),m=s(9),O=s(2),f=s(39),y=s.n(f),x=s(19),g=s.n(x),v=function(){try{var e=JSON.parse(localStorage.getItem("params"));e&&(g.a.defaults.headers.common.Authorization="Bearer ".concat(e.access_token))}catch(t){console.log("Error setting auth",t)}},k=function(){var e=Object(d.a)(p.a.mark((function e(t,s){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(),e.next=3,g.a.get(t,s);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),w=(s(72),s(73),s(74),function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(){return Object(u.a)(this,s),t.call(this)}return Object(j.a)(s,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentDidMount",value:function(){var e=this.props,t=e.history,s=e.location;localStorage.setItem("is_logged_in",!1);try{var a=function(e){for(var t,s={},a=/([^&;=]+)=?([^&;]*)/g,r=window.location.hash.substring(2);t=a.exec(r);)s[t[1]]=decodeURIComponent(t[2]);return s}(s.hash),r=(new Date).getTime()+1e3*a.expires_in;localStorage.setItem("params",JSON.stringify(a)),localStorage.setItem("expiration_time",r)}catch(c){t.push("/")}}},{key:"render",value:function(){return null}}]),s}(c.a.Component)),S=(s(15),function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(u.a)(this,s),(a=t.call(this,e)).getResult=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"https://api.spotify.com/v1/me/player",e.next=4,k("https://api.spotify.com/v1/me/player");case 4:t=e.sent,a.setState({item:t.item,is_playing:t.is_playing,progress_ms:t.progress_ms}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),a.state={token:null,item:{album:{images:[{url:""}]},name:"",artists:[{name:""}],duration_ms:0},is_playing:"Paused",progress_ms:0},a}return Object(j.a)(s,[{key:"componentDidMount",value:function(){this.getResult()}},{key:"componentDidUpdate",value:function(e){this.props.currentlyPlaying!==e.currentlyPlaying&&this.getResult()}},{key:"render",value:function(){var e;return this.props.isValidSession?(e=this.state.item?Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"collapse show",id:"now-playing",children:Object(a.jsxs)("div",{className:"now-playing-album-art card",children:[Object(a.jsx)("img",{class:"card-img-top",src:this.state.item.album.images[0].url,alt:"Card image cap"}),Object(a.jsx)("div",{className:"card-body",children:this.state.item.name}),Object(a.jsx)("div",{className:"card-text",children:this.state.item.artists[0].name})]})})}):null,Object(a.jsx)("div",{children:e})):Object(a.jsx)(O.a,{to:"/login"})}}]),s}(r.Component)),N=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){return Object(u.a)(this,s),t.call(this,e)}return Object(j.a)(s,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var e;return this.props.isValidSession?(e=this.props.topArtists?Object(a.jsx)("div",{className:"top-artists-wrapper",children:Object(a.jsxs)("section",{class:"top-artists-section",children:[Object(a.jsx)("h1",{children:"Top Artists"}),this.props.topArtists.map((function(e){return Object(a.jsx)("a",{href:e.external_urls.spotify,children:Object(a.jsxs)("div",{className:"top-artists shadow card",children:[Object(a.jsx)("img",{class:"card-img top-artists-img","data-mdb":!0,src:e.images[0].url}),Object(a.jsx)("div",{className:"card-body",children:e.name})]})})}))]})}):Object(a.jsx)("div",{children:"Loading..."}),Object(a.jsx)("div",{children:e})):Object(a.jsx)(O.a,{to:"/login"})}}]),s}(r.Component),_=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){return Object(u.a)(this,s),t.call(this,e)}return Object(j.a)(s,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var e;return this.props.isValidSession?(this.props.topTracks&&(e=Object(a.jsx)("div",{className:"top-tracks-wrapper",children:Object(a.jsxs)("section",{class:"top-tracks-section",children:[Object(a.jsx)("h1",{children:"Top Tracks"}),this.props.topTracks.map((function(e){return Object(a.jsx)("a",{href:e.external_urls.spotify,children:Object(a.jsxs)("div",{className:"top-tracks shadow card",children:[Object(a.jsx)("img",{class:"card-img",src:e.album.images[0].url}),Object(a.jsx)("div",{className:"card-body",children:e.name})]})})}))]})})),Object(a.jsx)("div",{children:e})):Object(a.jsx)(O.a,{to:"/login"})}}]),s}(r.Component),T=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){return Object(u.a)(this,s),t.call(this,e)}return Object(j.a)(s,[{key:"render",value:function(){var e;return this.props.isValidSession?(this.props.profile&&this.props.profile.images.length>0?e=Object(a.jsx)("section",{class:"profile-section",children:Object(a.jsx)("div",{className:"profile-wrapper",children:Object(a.jsxs)("div",{className:"card profile",children:[Object(a.jsx)("img",{className:"card-img",src:this.props.profile.images[0].url}),Object(a.jsxs)("div",{className:"card-body profile-card-body",children:[Object(a.jsx)("h5",{class:"card-title",children:this.props.profile.display_name}),Object(a.jsxs)("ul",{class:"list-group list-group-flush",children:[Object(a.jsxs)("li",{class:"list-group-item",children:[this.props.profile.followers.total," Followers"]}),Object(a.jsx)("a",{class:"no-style",href:this.props.profile.external_urls.spotify,children:Object(a.jsx)("li",{class:"list-group-item",children:"Profile"})})]})]})]})})}):this.props.profile&&(e=Object(a.jsx)("section",{class:"profile-section",children:Object(a.jsx)("div",{className:"profile-wrapper",children:Object(a.jsx)("div",{className:"card profile",children:Object(a.jsxs)("div",{className:"card-body profile-card-body",children:[Object(a.jsx)("h5",{class:"card-title",children:this.props.profile.display_name}),Object(a.jsxs)("ul",{class:"list-group list-group-flush",children:[Object(a.jsxs)("li",{class:"list-group-item",children:[this.props.profile.followers.total," Followers"]}),Object(a.jsx)("a",{class:"no-style",href:this.props.profile.external_urls.spotify,children:Object(a.jsx)("li",{class:"list-group-item",children:"Profile"})})]})]})})})})),Object(a.jsx)("div",{children:e})):Object(a.jsx)(O.a,{to:"/login"})}}]),s}(r.Component),C=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){return Object(u.a)(this,s),t.call(this,e)}return Object(j.a)(s,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var e=this.props.recentlyPlayed;return this.props.isValidSession?(this.props.recentlyPlayed&&(e=Object(a.jsx)("div",{className:"recently-played-wrapper",children:Object(a.jsxs)("section",{class:"recently-played-section",children:[Object(a.jsx)("h1",{children:"Recently Played"}),this.props.recentlyPlayed.map((function(e){return Object(a.jsx)("a",{href:e.track.external_urls.spotify,children:Object(a.jsxs)("div",{className:"recently-played shadow card",children:[Object(a.jsx)("img",{class:"card-img recently-played-img",src:e.track.album.images[0].url}),Object(a.jsx)("div",{className:"card-body",children:e.track.name})]})})}))]})})),Object(a.jsx)("div",{children:e})):Object(a.jsx)(O.a,{to:"/login"})}}]),s}(r.Component),P=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){return Object(u.a)(this,s),t.call(this,e)}return Object(j.a)(s,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var e;if(!this.props.isValidSession)return Object(a.jsx)(O.a,{to:"/login"});if(this.props.topTracks){var t=this.props.topTracks.sort((function(e,t){return parseInt(new Date(e.album.release_date).getFullYear())-parseInt(new Date(t.album.release_date).getFullYear())})),s=[];e=Object(a.jsx)("div",{className:"tracks-by-decade-wrapper",children:Object(a.jsx)("section",{class:"tracks-by-decade-section",children:t.map((function(e){var t=Math.floor(10*parseInt(new Date(e.album.release_date).getFullYear()/10));return s.includes(t)?Object(a.jsx)("a",{href:e.external_urls.spotify,children:Object(a.jsxs)("div",{className:"tracks-by-decade shadow card",children:[Object(a.jsx)("img",{class:"card-img",src:e.album.images[0].url}),Object(a.jsx)("div",{className:"card-body",children:e.name})]})}):(s.push(t),Object(a.jsxs)("span",{children:[Object(a.jsx)("h1",{children:t}),Object(a.jsx)("a",{href:e.external_urls.spotify,children:Object(a.jsxs)("div",{className:"tracks-by-decade shadow card",children:[Object(a.jsx)("img",{class:"card-img",src:e.album.images[0].url}),Object(a.jsx)("div",{className:"card-body",children:e.name})]})})]}))}))})})}return Object(a.jsx)("div",{children:e})}}]),s}(r.Component),V=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){return Object(u.a)(this,s),t.call(this,e)}return Object(j.a)(s,[{key:"randomizeArtistsTracks",value:function(){for(var e=this.props.topTracks.concat(this.props.topArtists),t=e.length-1;t>0;t--){var s=Math.floor(Math.random()*(t+1)),a=e[t];e[t]=e[s],e[s]=a}return e}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var e;if(!this.props.isValidSession)return Object(a.jsx)(O.a,{to:"/login"});if(this.props.topTracks){var t=this.randomizeArtistsTracks();e=Object(a.jsx)("div",{className:"collage-wrapper",children:Object(a.jsx)("section",{class:"collage-section",children:t.map((function(e){return e.album?Object(a.jsx)("a",{href:e.external_urls.spotify,children:Object(a.jsx)("div",{className:"collage shadow card",children:Object(a.jsx)("img",{class:"card-img",src:e.album.images[0].url})})}):Object(a.jsx)("a",{href:e.external_urls.spotify,children:Object(a.jsx)("div",{className:"collage shadow card",children:Object(a.jsx)("img",{class:"card-img",src:e.images[0].url})})})}))})})}return Object(a.jsx)("div",{children:e})}}]),s}(r.Component),A="".concat("https://john-dag.github.io/Cantio/#/redirect"),I=encodeURIComponent(A),U="".concat("https://accounts.spotify.com/authorize","?client_id=").concat("a4a3779fa77840e186f570b4e6e4598b","&redirect_uri=")+I+"&scope=".concat(["user-read-currently-playing","user-read-playback-state","user-top-read","user-read-recently-played"].join("%20"),"&response_type=token&show_dialog=true"),D=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(){return Object(u.a)(this,s),t.apply(this,arguments)}return Object(j.a)(s,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var e;return e=localStorage.getItem("is_logged_in")?Object(a.jsxs)("div",{className:"login-page",children:[Object(a.jsxs)("section",{className:"login-main container-fluid",children:[Object(a.jsx)("h1",{children:"Cantio"}),Object(a.jsx)("h6",{children:"Login with your Spotify account to view your listening habits."}),Object(a.jsx)("a",{className:"btn btn-login-link btn-success",href:U,children:"Login with Spotify"})]}),Object(a.jsx)("img",{class:"mx-auto d-block",src:"/Cantio/cantio_main.png"})]}):Object(a.jsx)("div",{children:"You're already logged in!"}),Object(a.jsx)("div",{children:e})}}]),s}(r.Component),R="".concat("https://john-dag.github.io/Cantio/#/redirect"),F=encodeURIComponent(R),M="".concat("https://accounts.spotify.com/authorize","?client_id=").concat("a4a3779fa77840e186f570b4e6e4598b","&redirect_uri=")+F+"&scope=".concat(["user-read-currently-playing","user-read-playback-state","user-top-read","user-read-recently-played"].join("%20"),"&response_type=token&show_dialog=true"),L=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(){var e;return Object(u.a)(this,s),(e=t.call(this)).isValidSession=function(){return(new Date).getTime()<localStorage.getItem("expiration_time")},e.getTopArtists=Object(d.a)(p.a.mark((function t(){var s,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,"https://api.spotify.com/v1/me/top/artists",t.next=4,k("https://api.spotify.com/v1/me/top/artists");case 4:s=t.sent,e.setState({topArtists:s.items}),a=[],Object.keys(e.state.topArtists).map((function(t){return a.push(e.state.topArtists[t])})),e.setState({topArtists:a}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log("Top artists request error",t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])}))),e.getTopTracks=Object(d.a)(p.a.mark((function t(){var s,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,"https://api.spotify.com/v1/me/top/tracks",t.next=4,k("https://api.spotify.com/v1/me/top/tracks");case 4:s=t.sent,e.setState({topTracks:s.items}),a=[],Object.keys(e.state.topTracks).map((function(t){return a.push(e.state.topTracks[t])})),e.setState({topTracks:a}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log("Top tracks request error",t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])}))),e.getUserProfile=Object(d.a)(p.a.mark((function t(){var s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,"https://api.spotify.com/v1/me",t.next=4,k("https://api.spotify.com/v1/me");case 4:s=t.sent,e.setState({profile:s}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("Profile request error",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),e.getCurrentlyPlaying=Object(d.a)(p.a.mark((function t(){var s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,"https://api.spotify.com/v1/me/player/currently-playing",t.next=4,k("https://api.spotify.com/v1/me/player/currently-playing");case 4:s=t.sent,e.setState({currentlyPlaying:s}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("Currently playing request error.",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),e.getRecentlyPlayed=Object(d.a)(p.a.mark((function t(){var s,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,"https://api.spotify.com/v1/me/player/recently-played",t.next=4,k("https://api.spotify.com/v1/me/player/recently-played");case 4:s=t.sent,e.setState({recentlyPlayed:s.items}),a=[],Object.keys(e.state.recentlyPlayed).map((function(t){return a.push(e.state.recentlyPlayed[t])})),e.setState({recentlyPlayed:a}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log("Recently played request error.",t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])}))),e.state={expirationTime:"0",isValidSession:!1,topArtists:null,topTracks:null,profile:null,currentlyPlaying:null,recentlyPlayed:null},e}return Object(j.a)(s,[{key:"componentDidMount",value:function(){var e,t=this;try{e=JSON.parse(localStorage.getItem("expiration_time"))}catch(a){e="0"}this.setState({expirationTime:e});var s=this.isValidSession();this.setState({isValidSession:s}),s?localStorage.setItem("is_logged_in",!0):localStorage.setItem("is_logged_in",!1),this.getTopTracks(),this.getTopArtists(),this.getUserProfile(),this.getCurrentlyPlaying(),this.getRecentlyPlayed(),s&&setInterval((function(){return t.getCurrentlyPlaying()}),1e3)}},{key:"render",value:function(){var e,t,s,r=this;return s=Object(a.jsx)("a",{href:M,children:Object(a.jsx)("button",{type:"button",class:"btn btn-primary btn-success navbar-btn",children:"Login"})}),this.state.isValidSession&&(e=Object(a.jsx)("div",{children:Object(a.jsx)(S,{isValidSession:this.isValidSession,currentlyPlaying:this.state.currentlyPlaying})}),t=Object(a.jsx)("div",{className:"text-center",children:Object(a.jsx)(T,{isValidSession:this.isValidSession,profile:this.state.profile})})),Object(a.jsx)(m.a,{basename:"/Cantio",children:Object(a.jsxs)("div",{className:"container-fluid",children:[Object(a.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-inner navbar-dark bg-dark",children:[Object(a.jsx)(m.b,{to:"/collage",className:"navbar-brand",children:"Cantio"}),Object(a.jsxs)("div",{className:"collpase navbar-collapse",children:[Object(a.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(a.jsxs)("li",{className:"navbar-item dropdown",children:[Object(a.jsx)("a",{class:"nav-link dropdown-toggle",href:"#",id:"navbarStats",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:"Stats"}),Object(a.jsxs)("div",{class:"dropdown-menu","aria-labelledby":"navbarStats",children:[Object(a.jsx)(m.b,{to:"/topartists",class:"dropdown-item",href:"#",children:"Top Artists"}),Object(a.jsx)(m.b,{to:"/toptracks",className:"dropdown-item",href:"#",children:"Top Tracks"}),Object(a.jsx)(m.b,{to:"/recentlyplayed",className:"dropdown-item",href:"#",children:"Recently Played"})]})]}),Object(a.jsx)("li",{className:"navbar-item",children:Object(a.jsx)(m.b,{to:"/tracksbydecade",className:"nav-link",children:"Top Tracks by Decade"})}),Object(a.jsx)("li",{className:"navbar-item",children:Object(a.jsx)(m.b,{to:"/collage",className:"nav-link",children:"Collage"})})]}),s]})]}),Object(a.jsx)("div",{children:t}),Object(a.jsx)(y.a,{children:Object(a.jsx)("div",{children:e})}),Object(a.jsxs)(O.d,{children:[Object(a.jsx)(O.b,{exact:!0,path:"/",component:D}),Object(a.jsx)(O.b,{path:"/login",component:D}),Object(a.jsx)(O.b,{path:"/:access_token(access_token=.*)",component:w}),Object(a.jsx)(O.b,{path:"/toptracks",render:function(e){return Object(a.jsx)(_,Object(o.a)({isValidSession:r.state.isValidSession,topTracks:r.state.topTracks},e))}}),Object(a.jsx)(O.b,{path:"/topartists",render:function(e){return Object(a.jsx)(N,Object(o.a)({isValidSession:r.state.isValidSession,topArtists:r.state.topArtists},e))}}),Object(a.jsx)(O.b,{path:"/recentlyplayed",render:function(e){return Object(a.jsx)(C,Object(o.a)({isValidSession:r.state.isValidSession,recentlyPlayed:r.state.recentlyPlayed},e))}}),Object(a.jsx)(O.b,{path:"/tracksbydecade",render:function(e){return Object(a.jsx)(P,Object(o.a)({isValidSession:r.state.isValidSession,topTracks:r.state.topTracks},e))}}),Object(a.jsx)(O.b,{path:"/collage",render:function(e){return Object(a.jsx)(V,Object(o.a)({isValidSession:r.state.isValidSession,topTracks:r.state.topTracks,topArtists:r.state.topArtists},e))}})]})]})})}}]),s}(r.Component),q=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,80)).then((function(t){var s=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,n=t.getTTFB;s(e),a(e),r(e),c(e),n(e)}))};i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(L,{})}),document.getElementById("root")),q()}},[[79,1,2]]]);
//# sourceMappingURL=main.8feceadd.chunk.js.map